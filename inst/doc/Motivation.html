<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Motivation</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Motivation</h1>



<blockquote>
<p>“A dataset is an identifiable collection of data available for access
or download in one or more formats.” ISO/IEC 20546</p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(dataset)</span></code></pre></div>
<p>The <code>dataset</code> package is designed to enhance the
<strong>semantic richness of R datasets</strong>, particularly those
structured as <code>data.frame</code> or <code>tibble</code> objects.
Its goal is to promote reusability and interoperability by enabling tidy
datasets to carry rich metadata — from the start.</p>
<p>Through practical iterations, it became evident that the structure of
a dataset cannot be separated from its <strong>purpose</strong>. As a
result, the <code>dataset</code> package has evolved into a family of
interrelated tools that support semantic clarity at both the column and
dataset level.</p>
<div id="problem-statement" class="section level2">
<h2>Problem statement</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">data.frame</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="at">geo =</span> <span class="fu">c</span>(<span class="st">&quot;LI&quot;</span>, <span class="st">&quot;SM&quot;</span>),</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">CPI =</span> <span class="fu">c</span>(<span class="st">&quot;0.8&quot;</span>, <span class="st">&quot;0.9&quot;</span>),</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="at">GNI =</span> <span class="fu">c</span>(<span class="st">&quot;8976&quot;</span>, <span class="st">&quot;9672&quot;</span>)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#&gt;   geo CPI  GNI</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#&gt; 1  LI 0.8 8976</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">#&gt; 2  SM 0.9 9672</span></span></code></pre></div>
<p>At first glance, this dataset appears tidy — columns are variables,
rows are observations. But is it interpretable?</p>
<ul>
<li><p><code>geo</code>: This might refer to geography — but is “LI”
Lichtenstein? What about “SM”? Is this ISO alpha-2? Eurostat’s codes?
World Bank’s?</p></li>
<li><p><code>CPI</code>: Is this the Consumer Price Index, or the
Corruption Perceptions Index? Something else entirely?</p></li>
<li><p><code>GNI</code>: It could mean Gross National Income or Global
Nutrition Index — and even if it’s GNI, is it measured in dollars,
euros, or something else?</p></li>
</ul>
<p>A tidy structure doesn’t guarantee <strong>semantic clarity</strong>.
Without metadata, every column is open to misinterpretation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">options</span>(<span class="at">sciphen =</span> <span class="dv">4</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>small_country_dataset <span class="ot">&lt;-</span> <span class="fu">dataset_df</span>(</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">defined</span>(</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;AD&quot;</span>, <span class="st">&quot;LI&quot;</span>),</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;http://data.europa.eu/bna/c_6c2bb82d&quot;</span>,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="at">namespace =</span> <span class="st">&quot;https://www.geonames.org/countries/$1/&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  ),</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  <span class="at">gdp =</span> <span class="fu">defined</span>(</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">3897</span>, <span class="dv">7365</span>),</span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Gross Domestic Product&quot;</span>,</span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a>    <span class="at">unit =</span> <span class="st">&quot;million dollars&quot;</span>,</span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;http://data.europa.eu/83i/aa/GDP&quot;</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a>  ),</span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a>  <span class="at">population =</span> <span class="fu">defined</span>(</span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a>    <span class="fu">c</span>(<span class="dv">77543</span>, <span class="dv">40015</span>),</span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>    <span class="at">label =</span> <span class="st">&quot;Population&quot;</span>,</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;http://data.europa.eu/bna/c_f2b50efd&quot;</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  ),</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>  <span class="at">dataset_bibentry =</span> <span class="fu">dublincore</span>(</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    <span class="at">creator =</span> <span class="fu">person</span>(<span class="at">given =</span> <span class="st">&quot;Jane&quot;</span>, <span class="at">family =</span> <span class="st">&quot;Doe&quot;</span>),</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;Small Country Dataset&quot;</span>,</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a>    <span class="at">publisher =</span> <span class="st">&quot;Reprex&quot;</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a>  )</span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>small_country_dataset<span class="sc">$</span>gdp_capita <span class="ot">&lt;-</span> <span class="fu">defined</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  small_country_dataset<span class="sc">$</span>gdp <span class="sc">*</span> <span class="fl">1e6</span> <span class="sc">/</span> small_country_dataset<span class="sc">$</span>population,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">unit =</span> <span class="st">&quot;dollar&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">&quot;GDP Per Capita&quot;</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>)</span></code></pre></div>
<p>The <strong>interoperability</strong> and <strong>future
reusability</strong> of data depends on the quality and presence of
metadata — not just the structure of the data itself. The
<code>dataset</code> package captures metadata as seamlessly and
non-intrusively as possible.</p>
<p>It covers:</p>
<ul class="task-list">
<li><p><label><input type="checkbox" checked></input><code>Descriptive metadata</code>: Follows DCTERMS and
DataCite standards to describe datasets for searchability, citation, and
sharing.</label></p></li>
<li><p><label><input type="checkbox" checked></input><code>Structural metadata</code>: Uses well-defined
variable names, consistent units of measure, and encourages globally
resolvable identifiers for rows and values.</label></p></li>
<li><p><label><input type="checkbox" checked></input><code>Provenance metadata</code>: Tracks where the data
came from and what happened to it — enabling transparent, reproducible
data workflows.</label></p></li>
</ul>
</div>
<div id="limits-on-reusability" class="section level2">
<h2>Limits on reusability</h2>
<p>Let’s take a look at the limitations of two, tidy datasets from an
interoperability and reusability point of view:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="co"># Dataset D (GDP in billions of USD)</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>),</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>),</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>) <span class="co"># GDP in billions of USD</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co"># Dataset E (GDP in billions of EUR)</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>E <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>),</span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>),</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">18000</span>, <span class="dv">2500</span>, <span class="dv">19000</span>, <span class="dv">2600</span>, <span class="dv">20000</span>, <span class="dv">2700</span>) <span class="co"># GDP in billions of EUR</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>)</span></code></pre></div>
<p>These datasets are tidy, and from a technical perspective, we can
easily combine them:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">full_join</span>(D, E)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="co">#&gt; Joining with `by = join_by(year, geocode, country_name, GDP)`</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 × 4</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co">#&gt;     year geocode country_name    GDP</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co">#&gt;  1  2020 USA     United States 21000</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="co">#&gt;  2  2020 CAN     Canada         2000</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="co">#&gt;  3  2021 USA     United States 22000</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt;  4  2021 CAN     Canada         2100</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt;  5  2022 USA     United States 23000</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt;  6  2022 CAN     Canada         2200</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt;  7  2020 USA     United States 18000</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt;  8  2020 FRA     France         2500</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt;  9  2021 USA     United States 19000</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 10  2021 FRA     France         2600</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt; 11  2022 USA     United States 20000</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; 12  2022 FRA     France         2700</span></span></code></pre></div>
<p>This join is syntactically valid — but semantically misleading.</p>
<ul>
<li><p>One column contains GDP values in USD, the other in EUR.</p></li>
<li><p>There’s no indication of this difference in the dataset
itself.</p></li>
</ul>
<p>Anyone reusing the dataset (especially if it’s saved to CSV or shared
without code comments) could misinterpret it — perhaps fatally in an
analysis.</p>
<p>Even in R, the metadata (e.g. currency) is detached from the values.
This problem worsens when datasets are consumed by users who do not read
R code or access the original documentation. Worse still, variables like
<code>CPI</code> might refer to the <em>Consumer Price Index</em> or the
<em>Corruption Perceptions Index</em> — and nothing in the dataset
guarantees which one was meant.</p>
</div>
<div id="enforcing-semantics" class="section level2">
<h2>Enforcing Semantics</h2>
<p>The <code>dataset</code> package introduces <code>defined()</code>
vectors, which carry metadata like units, variable labels, namespaces,
and definitions. When combining such vectors, this metadata is checked
for compatibility.</p>
<p>You cannot concatenate GDP vectors that are denominated in different
currencies:</p>
<p>Our strictly <code>defined</code> vectors check if the variable
label, unit, namespace and definition match. If they are missing, the
concatenation is possible, but when they are present, they must
match.</p>
<p>You cannot concatenate USD and EUR denominated values:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>GDP_D <span class="ot">&lt;-</span> <span class="fu">defined</span>(<span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>), <span class="at">unit =</span> <span class="st">&quot;M_USD&quot;</span>)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>GDP_E <span class="ot">&lt;-</span> <span class="fu">defined</span>(<span class="fu">c</span>(<span class="dv">18000</span>, <span class="dv">2500</span>, <span class="dv">19000</span>, <span class="dv">2600</span>, <span class="dv">20000</span>, <span class="dv">2700</span>), <span class="at">unit =</span> <span class="st">&quot;M_EUR&quot;</span>)</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">c</span>(GDP_D, GDP_E)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">message</span>(<span class="st">&quot;Error in c.haven_labelled_defined(GDP_D, GDP_E) :</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="st">  c.haven_labelled_defined(x,y): x,y must have no unit or the same unit&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">#&gt; Error in c.haven_labelled_defined(GDP_D, GDP_E) :</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co">#&gt;   c.haven_labelled_defined(x,y): x,y must have no unit or the same unit</span></span></code></pre></div>
<p>Concatenation is only allowed when metadata , in this case, the unit
of measure, or more precisely, the monetary unit matches:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>GDP_F <span class="ot">&lt;-</span> <span class="fu">defined</span>(<span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>), <span class="at">unit =</span> <span class="st">&quot;M_EUR&quot;</span>)</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>GDP_E <span class="ot">&lt;-</span> <span class="fu">defined</span>(<span class="fu">c</span>(<span class="dv">18000</span>, <span class="dv">2500</span>, <span class="dv">19000</span>, <span class="dv">2600</span>, <span class="dv">20000</span>, <span class="dv">2700</span>), <span class="at">unit =</span> <span class="st">&quot;M_EUR&quot;</span>)</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">c</span>(GDP_F, GDP_E)</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co">#&gt; x</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">#&gt; Measured in M_EUR </span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">#&gt;  [1] 21000  2000 22000  2100 23000  2200 18000  2500 19000  2600 20000  2700</span></span></code></pre></div>
</div>
<div id="reusability-from-the-start" class="section level2">
<h2>Reusability from the Start</h2>
<p>Many metadata packages in R aim to enrich datasets <strong>after
they’re built</strong> — when preparing them for publication, export, or
external documentation. In contrast, the <code>dataset</code> package
embeds semantics <strong>at the moment of dataset creation</strong>.</p>
<p>This early intervention:</p>
<ul>
<li><p>Adds value during exploratory and analytical work</p></li>
<li><p>Avoids costly ambiguity later</p></li>
<li><p>Makes R-native datasets more robust and shareable</p></li>
<li><p>Enables integration with packages like <code>frictionless</code>,
<code>dataspice</code>, or <code>rdflib</code> (the latter two are
intended for deep future integration)</p></li>
</ul>
<p>This design aligns with the <a href="https://ec.europa.eu/isa2/eif_en/">European Interoperability
Framework (EIF)</a>, which outlines four levels of interoperability:</p>
<ol style="list-style-type: decimal">
<li><p>Legal</p></li>
<li><p>Organisational</p></li>
<li><p>Semantic</p></li>
<li><p>Technical</p></li>
</ol>
<p>While many R packages address the <em>technical layer</em>
(e.g. through standards-based file formats), and some touch on legal
metadata, the <code>dataset</code> family places emphasis on the
<em>organisational</em> and <em>semantic</em> layers — capturing
meaning, context, and responsibility from the inside out.</p>
<div id="tidy-data-and-graphs" class="section level3">
<h3>Tidy Data and Graphs</h3>
<p>While tidy tabular data and graph-based data may share similar
metadata needs, their workflows — and the assumptions they carry —
differ considerably.</p>
<p>Carl Boettiger and others have shown how tidy data frames can be
represented as RDF triples. In fact, serialising long-format tabular
data into RDF is now a common approach for semantic data exchange.
However, the <strong>origin</strong> of the data — whether from a graph,
tabular database, or API — strongly influences its semantic shape and
metadata requirements.</p>
<p>To support this diversity of reuse, the <code>dataset</code> package
is complemented by two specialised extensions:</p>
</div>
<div id="datacube-statistical-data-and-metadata-exchange" class="section level3">
<h3><code>datacube</code>: Statistical Data and Metadata Exchange</h3>
<p>This planned package focuses on <strong>interoperability with
SDMX</strong> (Statistical Data and Metadata eXchange), a standard
adopted by statistical offices such as Eurostat and the World Bank.</p>
<ul>
<li><p>Target user: Analysts working with structured tabular indicators
and hierarchies</p></li>
<li><p>Goal: Enable analysis and transformation within R, and export to
SDMX-compatible formats</p></li>
<li><p>Design: Enforces strict <code>data.frame</code> structure, linked
concepts, units, and classifications aligned to SDMX</p></li>
</ul>
</div>
<div id="wbdataset-knowledge-graph-compatibility" class="section level3">
<h3><code>wbdataset</code>: Knowledge Graph Compatibility</h3>
<p>This evolving package supports <strong>interoperability with Wikidata
and the Wikibase Data Model</strong>, which underpin the world’s largest
open knowledge graph.</p>
<ul>
<li><p>Target user: Analysts working with Wikidata or custom Wikibase
instances</p></li>
<li><p>Goal: Enable two-way workflows — from SPARQL query to enriched
analysis and back to triple-contributions</p></li>
<li><p>Design: Facilitates conversion between tidy data and semantic
triples</p></li>
</ul>
</div>
<div id="rdflib-native-graph-integration" class="section level3">
<h3><code>rdflib</code>: Native Graph Integration</h3>
<p>For graph-first use cases, the excellent <code>rdflib</code> package
provides RDF parsing and serialisation within R. <code>dataset</code> is
fully compatible and designed to work with <code>rdflib</code>, allowing
metadata-enriched <code>dataset_df</code> objects to serve as staging
grounds for RDF generation.</p>
</div>
</div>
<div id="our-approach-metadata-from-the-start" class="section level2">
<h2>Our Approach: Metadata from the Start</h2>
<p>The <code>dataset</code> package is based on a simple principle:</p>
<blockquote>
<p><strong>Data and metadata should live together.</strong></p>
</blockquote>
<p>This is achieved by using R’s powerful (but underused)
<code>attributes()</code> mechanism to store metadata <strong>directly
on vectors and data frames</strong>. Attributes are preserved in
<code>.rds</code> and <code>.rda</code> formats, ensuring metadata
travels with the data through most R workflows.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>D_enriched <span class="ot">&lt;-</span> <span class="fu">dataset_df</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>),</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>),</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>),</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="at">dataset_bibentry =</span> dataset<span class="sc">::</span><span class="fu">dublincore</span>(</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">&quot;North American GDP Dataset&quot;</span>,</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    <span class="at">description =</span> <span class="st">&quot;Dataset containing GDP data for North American countries.&quot;</span>,</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>    <span class="at">creator =</span> <span class="fu">person</span>(<span class="st">&quot;Daniel&quot;</span>, <span class="st">&quot;Antal&quot;</span>), <span class="co"># Replace with the actual creator</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>    <span class="at">publisher =</span> <span class="st">&quot;Reprex&quot;</span>,</span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a>    <span class="at">dataset_date =</span> <span class="fu">Sys.Date</span>(),</span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>    <span class="at">subject =</span> <span class="st">&quot;GDP&quot;</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>  )</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>)</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>D_enriched</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt; Antal (2025): North American GDP Dataset [dataset]</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt;   rowid      year geocode country_name    GDP </span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt;   &lt;defined&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt; 1 eg:1       2020 USA     United States 21000</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt; 2 eg:2       2020 CAN     Canada         2000</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt; 3 eg:3       2021 USA     United States 22000</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="co">#&gt; 4 eg:4       2021 CAN     Canada         2100</span></span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="co">#&gt; 5 eg:5       2022 USA     United States 23000</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="co">#&gt; 6 eg:6       2022 CAN     Canada         2200</span></span></code></pre></div>
<p>Other packages (like <code>dataspice</code>) also aim to improve
metadata capture. But many of them:</p>
<ul>
<li><p>Store metadata in <strong>separate CSV files</strong></p></li>
<li><p>Focus on publication-time workflows</p></li>
<li><p>Leave room for detachment or mismatch between data and
metadata</p></li>
</ul>
<p>In contrast, <code>dataset</code> stores metadata <strong>in the
object itself</strong>, alongside the data, from the moment of creation.
This ensures:</p>
<ul>
<li><p>Tighter integration between metadata and data</p></li>
<li><p>Metadata survives transformations and joins</p></li>
<li><p>Continuous improvement of metadata during analysis</p></li>
</ul>
<p>The enriched dataset gives us more information about the organisation
of the dataset as a whole, but still suffers from a loose definition of
its structural elements, i.e., the rows and the columns. We will come
back to this in the following sections.</p>
<p>The <code>dataset</code> package provides functions with sensible
defaults and structures compliant with international metadata standards.
The <code>dublincore()</code> and <code>datacite()</code> functions
create enhanced bibentry objects and offer many functions to change the
elements of these objects (i.e., to change the publication year, the
names of the contributors, etc.) These functions facilitate adding
metadata about the dataset as a whole (i.e., the overall organization of
the data, not individual rows or columns). It also establishes a
foundation for adding metadata about the internal structure of the
dataset, such as the meaning and intended use of rows and columns.</p>
<p>Currently, the <code>dataset</code> package’s approach to
row/column-level metadata differs depending on whether the data is
intended for a “datacube” or “wbdataset” (likely referring to a specific
data format or use case). This is because datasets reused in tabular or
graph forms have distinct semantic requirements, which necessitate
different function interfaces even if the underlying metadata needs are
similar. Future development may address these differences more
uniformly.</p>
<div id="keep-data-and-metadata-together" class="section level3">
<h3>Keep data and metadata together</h3>
<p>The <code>dataset</code> package shares similar goals with the
rOpenSci <code>dataspice</code> package, particularly concerning tabular
data. <code>dataspice</code> focuses on making datasets more
discoverable online by adding Schema.org metadata, a lightweight
ontology used by web search engines. A key interoperability goal for
<code>dataset</code> is to capture <em>all</em> the metadata that
<code>dataspice</code> utilizes <em>throughout</em> the analytical
workflow and store it directly within the R <code>data.frame</code>’s
attributes.</p>
<p>While <code>dataspice</code> encourages users to provide this
metadata separately in a CSV file (a convenient and simple approach),
this method has two critical weaknesses:</p>
<ol style="list-style-type: decimal">
<li><strong>User error:</strong> Users may not complete the CSV file or
might enter incorrect information.</li>
<li><strong>Synchronization issues:</strong> The released dataset and
its metadata can become detached, lost, or fall out of sync due to later
updates.</li>
</ol>
<p>Knowledge graphs offer a more robust solution by updating data and
metadata simultaneously, ensuring consistency and enforcing strict
metadata definitions. The <code>dataset</code> package aims to promote
continuous metadata collection and storage within the R object itself,
saving it alongside the data. R’s ability to store rich metadata in
attributes makes saving in <code>.rda</code> or <code>.rds</code> files
a compelling option, even if these formats aren’t universally
interoperable.</p>
<p>Inspired by knowledge graphs, <code>dataset</code> extends the use of
attributes to include graph-like metadata, such as recording the
dataset’s provenance: who downloaded the original data, who performed
manipulations, which R packages (“software agents”) were used, and so
on.</p>
</div>
<div id="from-tidy-to-tidier" class="section level3">
<h3>From tidy to tidier</h3>
<p>Tidy data principles, well-established among R users, promote data
reusability through a simple structure: rows represent observations, and
columns represent variables with meaningful names. This aligns with the
3NF normal form in relational databases and, as Carl Boettiger
illustrates, can also represent graph entries in a 3-column long format
(subject–predicate–object). However, two key limitations require going
beyond standard tidy principles:</p>
<ul>
<li><strong>Column name ambiguity:</strong> Column names can be
difficult to interpret and reuse over time. Richer semantic information
about columns is essential for improved interoperability and
reusability.</li>
<li><strong>Row name limitations:</strong> Row names are local
identifiers, hindering workflows involving joins and slices across
multiple datasets.</li>
</ul>
<p>While the <code>haven</code> and <code>labelled</code> packages in
the tidyverse provide enhanced column labels (similar to SPSS and
STATA), they are insufficient for complex workflows involving numerous
datasets. <code>dataset</code> addresses these limitations in two
ways:</p>
<ul>
<li>The <code>defined()</code> class, which inherits from
<code>labelled</code>, adds a <em>definition</em> and a
<em>namespace</em> to labels, enhancing their meaning and meeting the
requirements for linked open data.</li>
<li>Data provenance: <code>dataset</code> records data provenance (who
downloaded, manipulated, etc.) in the attributes, using a simplified
version of the PROV model and PROV-O ontology. (Further development of
this feature is planned for a separate package.)</li>
</ul>
<p>The <code>defined()</code> class also allows extending tidyverse row
IDs with a namespace or prefix, enabling conversion to globally unique
identifiers (GUIDs), critical when working with data from many
sources.</p>
<p>Beyond row and column identification, <code>dataset</code> addresses
the question of <em>when</em> to define a new dataset, a challenge only
partially answered in earlier versions and now delegated to the
<code>datacube</code> package. This question hinges on the concept of a
<em>datacube</em>, a structural enhancement of tidy data. Datacubes
categorize variables into:</p>
<ul>
<li><strong>Attributes:</strong> Metadata constraints.</li>
<li><strong>Dimensions:</strong> Variables suitable for summarizing or
slicing data.</li>
<li><strong>Measures:</strong> Values often requiring a unit of
measure.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="co"># Dataset D (GDP in billions of USD)</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>),</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>    <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  ),</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>) <span class="co"># GDP in billions of USD</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co"># Dataset E (GDP in billions of EUR)</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a>E <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>),</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(<span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>),</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">18000</span>, <span class="dv">2500</span>, <span class="dv">19000</span>, <span class="dv">2600</span>, <span class="dv">20000</span>, <span class="dv">2700</span>) <span class="co"># GDP in billions of EUR</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>)</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>joined_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">full_join</span>(D, E)</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="co">#&gt; Joining with `by = join_by(year, geocode, country_name, GDP)`</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a>joined_data</span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="co">#&gt; # A tibble: 12 × 4</span></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="co">#&gt;     year geocode country_name    GDP</span></span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;</span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a><span class="co">#&gt;  1  2020 USA     United States 21000</span></span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="co">#&gt;  2  2020 CAN     Canada         2000</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a><span class="co">#&gt;  3  2021 USA     United States 22000</span></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="co">#&gt;  4  2021 CAN     Canada         2100</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a><span class="co">#&gt;  5  2022 USA     United States 23000</span></span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="co">#&gt;  6  2022 CAN     Canada         2200</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a><span class="co">#&gt;  7  2020 USA     United States 18000</span></span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="co">#&gt;  8  2020 FRA     France         2500</span></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a><span class="co">#&gt;  9  2021 USA     United States 19000</span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="co">#&gt; 10  2021 FRA     France         2600</span></span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co">#&gt; 11  2022 USA     United States 20000</span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a><span class="co">#&gt; 12  2022 FRA     France         2700</span></span></code></pre></div>
<p>The <code>datacube</code> package emphasizes the distinction between
these variable types. For example, joining datasets with shared row IDs
and columns isn’t meaningful without considering units of measure (e.g.,
euros vs. dollars). Dimensions determine when a new dataset is needed.
<code>dataset</code>, through the <code>defined()</code> class, allows
specifying units of measure, while <code>datacube</code> handles the
broader needs of attributes, measures, and dimensions.</p>
</div>
<div id="from-tabular-to-graph-data" class="section level3">
<h3>From tabular to graph data</h3>
<p>The rOpenSci <code>rdflib</code> package, a wrapper for the Python
library of the same name, provides powerful tools for reading and
writing graph data. We believe <code>dataset</code> and
<code>rdflib</code> are complementary and should be used together. While
there’s a small overlap (inspired by an internal <code>rdflib</code>
function for working with NQuads, a form of RDF), we’ve avoided making
<code>rdflib</code> a direct dependency of <code>dataset</code>.
However, for users working with RDF-annotated graphs, we strongly
recommend using <code>dataset</code> in conjunction with
<code>rdflib</code> for importing, exporting, and exchanging data.</p>
<p>First, let us see how we would solve the ambiguity problems without
<code>dataset</code>, relying only on <em>tidyverse</em> and
<em>rdflib</em>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co"># Dataset D (GDP in billions of USD)</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>),</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>,</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a>    <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;Canada&quot;</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a>  ),</span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">21000</span>, <span class="dv">2000</span>, <span class="dv">22000</span>, <span class="dv">2100</span>, <span class="dv">23000</span>, <span class="dv">2200</span>) <span class="co"># GDP in billions of USD</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a>)</span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co"># Dataset E (GDP in billions of EUR)</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a>E <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">c</span>(<span class="dv">2020</span>, <span class="dv">2020</span>, <span class="dv">2021</span>, <span class="dv">2021</span>, <span class="dv">2022</span>, <span class="dv">2022</span>),</span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a>  <span class="at">geocode =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>, <span class="st">&quot;USA&quot;</span>, <span class="st">&quot;FRA&quot;</span>),</span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a>  <span class="at">country_name =</span> <span class="fu">c</span>(</span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a>    <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>,</span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a>    <span class="st">&quot;France&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;France&quot;</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a>  ),</span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a>  <span class="at">GDP =</span> <span class="fu">c</span>(<span class="dv">18000</span>, <span class="dv">2500</span>, <span class="dv">19000</span>, <span class="dv">2600</span>, <span class="dv">20000</span>, <span class="dv">2700</span>) <span class="co"># GDP in billions of EUR</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a>)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="co"># Combine datasets</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a>combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(D, E)</span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="co"># Convert all to character *before* pivoting</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a>combined_char <span class="ot">&lt;-</span> combined <span class="sc">%&gt;%</span></span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), as.character))</span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a><span class="co"># Rename geocode to subject</span></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a>combined_subject <span class="ot">&lt;-</span> combined_char <span class="sc">%&gt;%</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">subject =</span> geocode)</span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a><span class="co"># Pivot longer, excluding the subject (triples are named, but predicates are not renamed yet)</span></span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a>named_triples <span class="ot">&lt;-</span> combined_subject <span class="sc">%&gt;%</span></span>
<span id="cb12-38"><a href="#cb12-38" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb12-39"><a href="#cb12-39" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(year, country_name, GDP),</span>
<span id="cb12-40"><a href="#cb12-40" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;predicate&quot;</span>,</span>
<span id="cb12-41"><a href="#cb12-41" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;object&quot;</span></span>
<span id="cb12-42"><a href="#cb12-42" tabindex="-1"></a>  )</span>
<span id="cb12-43"><a href="#cb12-43" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" tabindex="-1"></a><span class="co"># Replace geocodes with Geonames IDs and add datatype annotations</span></span>
<span id="cb12-45"><a href="#cb12-45" tabindex="-1"></a>geonames_mapping <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb12-46"><a href="#cb12-46" tabindex="-1"></a>  <span class="at">subject =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;CAN&quot;</span>, <span class="st">&quot;FRA&quot;</span>),</span>
<span id="cb12-47"><a href="#cb12-47" tabindex="-1"></a>  <span class="at">geonames_id =</span> <span class="fu">c</span>(<span class="st">&quot;6252001&quot;</span>, <span class="st">&quot;6251999&quot;</span>, <span class="st">&quot;2988317&quot;</span>)</span>
<span id="cb12-48"><a href="#cb12-48" tabindex="-1"></a>)</span>
<span id="cb12-49"><a href="#cb12-49" tabindex="-1"></a></span>
<span id="cb12-50"><a href="#cb12-50" tabindex="-1"></a>rdf_triples <span class="ot">&lt;-</span> named_triples <span class="sc">%&gt;%</span></span>
<span id="cb12-51"><a href="#cb12-51" tabindex="-1"></a>  <span class="fu">left_join</span>(geonames_mapping, <span class="at">by =</span> <span class="st">&quot;subject&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-52"><a href="#cb12-52" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-53"><a href="#cb12-53" tabindex="-1"></a>    <span class="at">subject =</span> <span class="fu">paste0</span>(<span class="st">&quot;geonames:&quot;</span>, geonames_id),</span>
<span id="cb12-54"><a href="#cb12-54" tabindex="-1"></a>    <span class="at">predicate =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-55"><a href="#cb12-55" tabindex="-1"></a>      predicate <span class="sc">==</span> <span class="st">&quot;year&quot;</span> <span class="sc">~</span> <span class="st">&quot;sdmx:TIME_PERIOD&quot;</span>,</span>
<span id="cb12-56"><a href="#cb12-56" tabindex="-1"></a>      predicate <span class="sc">==</span> <span class="st">&quot;country_name&quot;</span> <span class="sc">~</span> <span class="st">&quot;schema:name&quot;</span>,</span>
<span id="cb12-57"><a href="#cb12-57" tabindex="-1"></a>      predicate <span class="sc">==</span> <span class="st">&quot;GDP&quot;</span> <span class="sc">~</span> <span class="st">&quot;sdmx:OBS_VALUE&quot;</span>,</span>
<span id="cb12-58"><a href="#cb12-58" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> predicate</span>
<span id="cb12-59"><a href="#cb12-59" tabindex="-1"></a>    ),</span>
<span id="cb12-60"><a href="#cb12-60" tabindex="-1"></a>    <span class="at">object =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-61"><a href="#cb12-61" tabindex="-1"></a>      predicate <span class="sc">==</span> <span class="st">&quot;sdmx:TIME_PERIOD&quot;</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, object, <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">^^&lt;http://www.w3.org/2001/XMLSchema#gYear&gt;&quot;</span>),</span>
<span id="cb12-62"><a href="#cb12-62" tabindex="-1"></a>      predicate <span class="sc">==</span> <span class="st">&quot;sdmx:OBS_VALUE&quot;</span> <span class="sc">~</span> <span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&quot;</span>, object, <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">^^&lt;http://www.w3.org/2001/XMLSchema#double&gt;&quot;</span>),</span>
<span id="cb12-63"><a href="#cb12-63" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> object</span>
<span id="cb12-64"><a href="#cb12-64" tabindex="-1"></a>    )</span>
<span id="cb12-65"><a href="#cb12-65" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-66"><a href="#cb12-66" tabindex="-1"></a>  <span class="fu">select</span>(subject, predicate, object)</span>
<span id="cb12-67"><a href="#cb12-67" tabindex="-1"></a></span>
<span id="cb12-68"><a href="#cb12-68" tabindex="-1"></a><span class="fu">print</span>(<span class="st">&quot;RDF Triples (subject, predicate, object):&quot;</span>)</span>
<span id="cb12-69"><a href="#cb12-69" tabindex="-1"></a><span class="co">#&gt; [1] &quot;RDF Triples (subject, predicate, object):&quot;</span></span>
<span id="cb12-70"><a href="#cb12-70" tabindex="-1"></a><span class="fu">print</span>(rdf_triples)</span>
<span id="cb12-71"><a href="#cb12-71" tabindex="-1"></a><span class="co">#&gt; # A tibble: 36 × 3</span></span>
<span id="cb12-72"><a href="#cb12-72" tabindex="-1"></a><span class="co">#&gt;    subject          predicate        object                                     </span></span>
<span id="cb12-73"><a href="#cb12-73" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;                                      </span></span>
<span id="cb12-74"><a href="#cb12-74" tabindex="-1"></a><span class="co">#&gt;  1 geonames:6252001 sdmx:TIME_PERIOD &quot;\&quot;2020\&quot;^^&lt;http://www.w3.org/2001/XMLSche…</span></span>
<span id="cb12-75"><a href="#cb12-75" tabindex="-1"></a><span class="co">#&gt;  2 geonames:6252001 schema:name      &quot;United States&quot;                            </span></span>
<span id="cb12-76"><a href="#cb12-76" tabindex="-1"></a><span class="co">#&gt;  3 geonames:6252001 sdmx:OBS_VALUE   &quot;\&quot;21000\&quot;^^&lt;http://www.w3.org/2001/XMLSch…</span></span>
<span id="cb12-77"><a href="#cb12-77" tabindex="-1"></a><span class="co">#&gt;  4 geonames:6251999 sdmx:TIME_PERIOD &quot;\&quot;2020\&quot;^^&lt;http://www.w3.org/2001/XMLSche…</span></span>
<span id="cb12-78"><a href="#cb12-78" tabindex="-1"></a><span class="co">#&gt;  5 geonames:6251999 schema:name      &quot;Canada&quot;                                   </span></span>
<span id="cb12-79"><a href="#cb12-79" tabindex="-1"></a><span class="co">#&gt;  6 geonames:6251999 sdmx:OBS_VALUE   &quot;\&quot;2000\&quot;^^&lt;http://www.w3.org/2001/XMLSche…</span></span>
<span id="cb12-80"><a href="#cb12-80" tabindex="-1"></a><span class="co">#&gt;  7 geonames:6252001 sdmx:TIME_PERIOD &quot;\&quot;2021\&quot;^^&lt;http://www.w3.org/2001/XMLSche…</span></span>
<span id="cb12-81"><a href="#cb12-81" tabindex="-1"></a><span class="co">#&gt;  8 geonames:6252001 schema:name      &quot;United States&quot;                            </span></span>
<span id="cb12-82"><a href="#cb12-82" tabindex="-1"></a><span class="co">#&gt;  9 geonames:6252001 sdmx:OBS_VALUE   &quot;\&quot;22000\&quot;^^&lt;http://www.w3.org/2001/XMLSch…</span></span>
<span id="cb12-83"><a href="#cb12-83" tabindex="-1"></a><span class="co">#&gt; 10 geonames:6251999 sdmx:TIME_PERIOD &quot;\&quot;2021\&quot;^^&lt;http://www.w3.org/2001/XMLSche…</span></span>
<span id="cb12-84"><a href="#cb12-84" tabindex="-1"></a><span class="co">#&gt; # ℹ 26 more rows</span></span></code></pre></div>
<p>The <code>frictionless</code> package has a somewhat similar
approach, but it does not support either a metadata standard or a strict
serialisation standard.</p>
<p>Both <code>rdflib</code> and <code>frictionless</code> provide strong
foundations for exporting datasets, but they differ in scope and
assumptions. The <code>rdflib</code> package utilises the World Wide Web
RDF standard, which is also used by SDMX and many open science
repositories. It supports multiple serialisation forms, including
JSON-LD. By contrast, <code>frictionless</code> relies on JSON
containers but lacks a formal ontology layer.</p>
<p>Both packages can preserve technical metadata, but neither guides
users toward a consistent semantic model. They provide the vehicle, but
not the fuel.</p>
<p>The <code>dataset</code> package — especially through its downstream
extensions like <code>datacube</code> and <code>wbdataset</code> — aims
to fill this gap, offering metadata curation aligned with high levels of
organisational and semantic interoperability. <code>datacube</code>
focuses on SDMX-style statistical datasets, while <code>wbdataset</code>
helps users adopt the Wikibase data model and workflow.</p>
<p>Unlike <code>rdflib</code>, which requires RDF/OWL expertise, and
<code>frictionless</code>, which delegates semantics to arbitrary field
descriptions, <code>dataset</code> provides structure and guidance
without requiring users to leave the R environment.</p>
</div>
<div id="publishing-the-data" class="section level3">
<h3>Publishing the data</h3>
<p>Let us return to the ISO/IEC 20546 definition used as a motto:<br />
“A dataset is an identifiable collection of data available for access or
download in one or more formats.”</p>
<p>Datasets should be published with their future reuse in mind. Several
R packages support dataset publication, each targeting different use
cases and levels of interoperability:</p>
<ul>
<li>The <a href="https://CRAN.R-project.org/package=rdflib"><code>rdflib</code></a>
package envisions reuse in fully semantic environments, using RDF as a
standard.</li>
<li>The <a href="https://docs.ropensci.org/dataspice/"><code>dataspice</code></a>
package focuses on enhancing discoverability by adding Schema.org
metadata to HTML documentation.</li>
<li>The <a href="https://CRAN.R-project.org/package=frictionless"><code>frictionless</code></a>
package promotes packaging metadata (in JSON) and data (in CSV) for
structured publication.</li>
<li>The <code>wbdataset</code> package (in development) supports
publication to Wikibase, which powers Wikidata.</li>
</ul>
<p>The <code>dataset</code> package is designed to be compatible with
all of these tools. It enables seamless export to:</p>
<ul>
<li><code>rdflib</code> for RDF-based graph publication</li>
<li><code>dataspice</code> for search engine–optimised publishing</li>
<li><code>wbdataset</code> for contribution to the Wikibase
ecosystem</li>
</ul>
<p>Although <code>frictionless</code> is currently not a direct target,
it can be supported if user demand arises.</p>
<p>Wikibase is an especially interesting target. It supports RDF exports
and shares much with triplestores conceptually, but its design allows
users to work with graph-structured data without requiring deep
knowledge of RDF or SPARQL. While the <code>WikibaseR</code> package is
no longer maintained, we intend to co-develop <code>wbdataset</code> and
a new <code>WikibaseR</code> to restore seamless integration with
Wikibase.</p>
<p>Below is a dataset of musical artists from small countries. It
demonstrates how <code>dataset</code> handles dataset-level metadata
(e.g. rights, authorship, provenance) and row-level annotations without
requiring external formats or technologies.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>small_country_musicians <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="at">qid =</span> <span class="fu">c</span>(<span class="st">&quot;Q275912&quot;</span>, <span class="st">&quot;Q116196078&quot;</span>),</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="at">artist_name =</span> <span class="fu">defined</span>(</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Marta Roure&quot;</span>, <span class="st">&quot;wavvyboi&quot;</span>),</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;https://www.wikidata.org/wiki/Property:P2093&quot;</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  ),</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="at">location =</span> <span class="fu">defined</span>(</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Andorra&quot;</span>, <span class="st">&quot;Lichtenstein&quot;</span>),</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;https://www.wikidata.org/wiki/Property:P276&quot;</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>  ),</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a>  <span class="at">date_of_birth =</span> <span class="fu">defined</span>(</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a>    <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1981-01-16&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;1998-04-28&quot;</span>)),</span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a>    <span class="at">concept =</span> <span class="st">&quot;https://www.wikidata.org/wiki/Property:P569&quot;</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a>  )</span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a>)</span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a>small_country_musicians<span class="sc">$</span>age <span class="ot">&lt;-</span> <span class="fu">defined</span>(</span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a>  <span class="dv">2024</span> <span class="sc">-</span> <span class="fu">as.integer</span>(</span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a>    <span class="fu">substr</span>(</span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a>      <span class="fu">as.character</span>(small_country_musicians<span class="sc">$</span>date_of_birth),</span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a>      <span class="dv">1</span>, <span class="dv">4</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a>    )</span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a>  ),</span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a>  <span class="at">label =</span> <span class="st">&quot;Age in 2024&quot;</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a>)</span></code></pre></div>
<p>This dataset includes semantic definitions (linked to Wikidata
properties), automatically tracks provenance, and can be exported using
any of the supported tools. By embedding rich metadata directly in R
objects, the <code>dataset</code> package ensures that
publication-readiness and reuse potential are built in from the
start.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
